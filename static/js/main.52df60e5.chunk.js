(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{396:function(e,t,a){e.exports=a(588)},400:function(e,t,a){},401:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},402:function(e,t,a){},588:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(17),o=a.n(c),i=(a(400),a(401),a(402),a(20)),s=a(60),l=a(378),u=a(8),d=a(26),f=a.n(d),g=(a(408),{categories:[],status:"error"}),p={subcategories:[],status:"error"},b={goods:[],status:"error",uploadGoodStatus:"error"},m=a(622),O=Object(s.c)({categoryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_LOADING":return f()(e,{});case"DATA_SUCCESS":return f()(e,{categories:{$set:t.categories},status:{$set:"success"},statusText:{$set:"Categories successfully loaded"}});case"DATA_ERR":return f()(e,{status:{$set:"error"},statusText:{$set:"Error has occured, try later"}});case"ERR_ADD_CATEGORY":return f()(e,{status:{$set:"error"},statusText:{$set:"Wrong input data"}});case"PUSH_ELEM_TO_CATEGORY":var a=!0;for(var r in e.categories)e.categories[r].name===t.newElemCategory.name&&(console.log("invalid"),a=!1);return a?f()(e,{categories:{$push:[t.newElemCategory]},status:{$set:"success"},statusText:{$set:"Successfully added!"}}):f()(e,{status:{$set:"error"},statusText:{$set:'"'.concat(t.newElemCategory.name,'" already exist')}});case"SUCC_DELETE":var n=e.categories.indexOf(t.ElemToDeleteCategory);return f()(e,{categories:{$splice:[[n,1]]},status:{$set:"success"},statusText:{$set:"Successfully deleted!"}});case"CATEGORY_SUCC_EDIT":var c;return e.categories.forEach((function(e,a){return t.editedCategory._id==e._id?c=a:null})),f()(e,{categories:Object(u.a)({},c,{$set:t.editedCategory})});default:return e}},subcategoryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_LOADING":return f()(e,{});case"SUBCATEGORY_SUCC_LOAD":return f()(e,{subcategories:{$set:t.subcategories},status:{$set:"success"},statusText:{$set:"Subcategories successfully loaded!"}});case"SUBCATEGORY_ERROR_LOAD":return f()(e,{status:{$set:"error"},statusText:{$set:"Error has occured, try later"}});case"SUBCATEGORY_ERROR_ADD":return f()(e,{status:{$set:"error"},statusText:{$set:"Wrong input data"}});case"SUBCATEGORY_ADD_ELEM":var a=!0;for(var r in e.subcategories)e.subcategories[r].name===t.newElemSubCategory.name&&(console.log("invalid"),a=!1);return a?f()(e,{subcategories:{$push:[t.newElemSubCategory]},status:{$set:"success"},statusText:{$set:"Successfully added!"}}):f()(e,{status:{$set:"error"},statusText:{$set:'"'.concat(t.newElemSubCategory.name,'" already exist')}});case"SUCC_DELETE":var n=e.subcategories.indexOf(t.ElemToDeleteSubCategory);return f()(e,{subcategories:{$splice:[[n,1]]},status:{$set:"success"},statusText:{$set:"Successfully deleted!"}});case"SUBCATEGORY_SUCC_EDIT":var c;return e.subcategories.forEach((function(e,a){return t.editedSubcategory._id==e._id?c=a:null})),f()(e,{subcategories:Object(u.a)({},c,{$set:t.editedSubcategory})});default:return e}},goodsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_LOADING":return f()(e,{});case"GOODS_SUCC_LOAD":return f()(e,{goods:{$set:t.goods},status:{$set:"success"},statusText:{$set:"Goods successfully loaded!"}});case"GOODS_ERROR_LOAD":return f()(e,{status:{$set:"error"},statusText:{$set:"Error has occured, try later"}});case"GOODS_SUCC_ADD":return f()(e,{goods:{$push:t.newGood},uploadGoodStatus:{$set:"success"}});case"GOODS_ADD_ELEM":var a=!0;for(var r in e.goods)e.goods[r].name===t.newElemSubCategory.name&&(console.log("invalid"),a=!1);return a?f()(e,{goods:{$push:[t.newElemSubCategory]},status:{$set:"success"},statusText:{$set:"Successfully added!"}}):f()(e,{status:{$set:"error"},statusText:{$set:'"'.concat(t.newElemSubCategory.name,'" already exist')}});case"GOODS_DEL_ELEM":var n=e.goods.indexOf(t.ElemToDeleteSubCategory);return f()(e,{goods:{$splice:[[n,1]]},status:{$set:"success"},statusText:{$set:"Successfully deleted!"}});default:return e}},form:m.a}),h=Object(s.e)(O,Object(s.a)(l.a)),y=a(16),E=a(339),j=a(4),w=a(70),R=a(613),v=a(593),C=a(614),S=a(590),x=a(340),D=a(91),T=a(21),_=a.n(T),A=a(38),P=a(61),k=a.n(P);var N=function(e){return function(){var t=Object(A.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.a.delete("/category/".concat(e._id)).then((function(t){return t.data==e._id?a({type:"SUCC_DELETE",ElemToDeleteCategory:e}):a({type:"DATA_ERR"})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};var $=function(e){return console.log(e),function(){var t=Object(A.a)(_.a.mark((function t(a,r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.a.post("/good/add",e).then((function(e){return console.log(e.data),a("invalid data"==e?{type:"GOODS_ERROR_ADD"}:{type:"GOODS_SUCC_ADD",newGood:e.data})})).catch((function(e){return a({type:"GOODS_ERROR_ADD"})}));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},U=Object(E.a)((function(e){return{root:{display:"flex"},appBar:{width:"calc(100% - ".concat(130,"px)"),marginLeft:130},workArea:{width:"calc(100% - ".concat(130,"px)"),marginLeft:130},drawer:{width:130,flexShrink:0},drawerPaper:{width:130},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)}}}));Object(j.a)({root:{paddingLeft:"40px"}})(S.a);function G(){var e=U(),t=Object(r.useState)(!1),a=Object(y.a)(t,2);a[0],a[1];var c=Object(i.c)();return Object(r.useEffect)((function(){c(function(){var e=Object(A.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.a.get("/category").then((function(e){return t({type:"DATA_SUCCESS",categories:e.data})})).catch((function(e){return t({type:"DATA_ERR"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(function(){var e=Object(A.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.a.get("/subcategory").then((function(e){return t({type:"SUBCATEGORY_SUCC_LOAD",subcategories:e.data})})).catch((function(e){return t({type:"SUBCATEGORY_ERROR_LOAD"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(function(){var e=Object(A.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.a.get("/good").then((function(e){return t({type:"GOODS_SUCC_LOAD",goods:e.data})})).catch((function(e){return t({type:"GOODS_ERROR_LOAD"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),n.a.createElement("div",{className:e.root},n.a.createElement(R.a,null),n.a.createElement(w.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},anchor:"left"},n.a.createElement("div",{className:e.toolbar}),n.a.createElement(C.a,null),n.a.createElement(v.a,null,n.a.createElement(D.b,{to:"/categories",style:{textDecoration:"none",color:"black"}},n.a.createElement(S.a,{button:!0,key:"Categories"},n.a.createElement(x.a,{primary:"Categories"}))),n.a.createElement(D.b,{to:"/subcategories",style:{textDecoration:"none",color:"black"}},n.a.createElement(S.a,{button:!0,key:"Subcategories"},n.a.createElement(x.a,{primary:"Subcategories"}))),n.a.createElement(D.b,{to:"/goods",style:{textDecoration:"none",color:"black"}},n.a.createElement(S.a,{button:!0,key:"Goods"},n.a.createElement(x.a,{primary:"Goods"}))))))}var I=a(131),L=a.n(I),M=a(141),W=a.n(M),B=a(132),Y=a.n(B),F=a(139),q=a.n(F),H=a(93),J=a.n(H),V=a(92),z=a.n(V),K=a(133),Q=a.n(K),X=a(134),Z=a.n(X),ee=a(136),te=a.n(ee),ae=a(137),re=a.n(ae),ne=a(138),ce=a.n(ne),oe=a(142),ie=a.n(oe),se=a(135),le=a.n(se),ue=a(140),de=a.n(ue),fe=a(143),ge=a.n(fe),pe=a(111),be=a.n(pe),me=a(623),Oe=function(e){var t,a;Object(r.useEffect)((function(){return s(!0),a=setTimeout((function(){s(!1)}),5e3),function(){clearTimeout(a)}}),[e]);var c=Object(r.useState)(!1),o=Object(y.a)(c,2),i=o[0],s=o[1],l=Object(j.a)({root:(t={position:"fixed",bottom:"10px",width:"100%"},Object(u.a)(t,"width","500px"),Object(u.a)(t,"left","250px"),Object(u.a)(t,"zIndex",100),t)})(me.a);return n.a.createElement("div",null,n.a.createElement(l,{style:{display:i?"":"none"},severity:e.props.status,onClick:function(){s(!i)}},e.props.statusText))},he={Add:Object(r.forwardRef)((function(e,t){return n.a.createElement(L.a,Object.assign({},e,{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return n.a.createElement(Y.a,Object.assign({},e,{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return n.a.createElement(z.a,Object.assign({},e,{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return n.a.createElement(Q.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return n.a.createElement(J.a,Object.assign({},e,{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return n.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return n.a.createElement(le.a,Object.assign({},e,{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return n.a.createElement(te.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(re.a,Object.assign({},e,{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(ce.a,Object.assign({},e,{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(J.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(q.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return n.a.createElement(z.a,Object.assign({},e,{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return n.a.createElement(de.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return n.a.createElement(W.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return n.a.createElement(ie.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return n.a.createElement(ge.a,Object.assign({},e,{ref:t}))}))},ye=function(){var e=Object(i.d)((function(e){return e.categoryReducer.categories})),t=Object(i.d)((function(e){return e.categoryReducer.status})),a=Object(i.d)((function(e){return e.categoryReducer.statusText})),r=Object(i.c)(),c={status:t,statusText:a};return n.a.createElement("div",{style:{width:"100%"}},n.a.createElement(Oe,{props:c}),n.a.createElement(be.a,{icons:he,columns:[{title:"Name",field:"name"},{title:"Display name",field:"displayName"},{title:"Description",field:"description",cellStyle:{maxWidth:"200px",wordWrap:"break-word"}},{title:"Short description",field:"shortDescription",cellStyle:{maxWidth:"100px",wordWrap:"break-word"}},{title:"Position",field:"displayPosition"}],data:e,title:"Categories",editable:{onRowAdd:function(e){return r((t=e,function(){var e=Object(A.a)(_.a.mark((function e(a,r){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t).name.length>=1&&r.name.length<=300&&r.displayPosition.length>=1&&r.displayPosition.length<=5&&r.displayName.length>=1&&r.displayPosition.length<=300&&r.shortDescription.length>=1&&r.displayPosition.length<=300&&r.description.length>=50&&r.displayPosition.length<=1e3){e.next=5;break}return e.abrupt("return",a({type:"ERR_ADD_CATEGORY"}));case 5:k.a.put("/category/add",t).then((function(e){return a("invalid data"==e?{type:"DATA_ERR"}:{type:"PUSH_ELEM_TO_CATEGORY",newElemCategory:e.data})})).catch((function(e){return a({type:"DATA_ERR"})}));case 6:case"end":return e.stop()}var r}),e)})));return function(t,a){return e.apply(this,arguments)}}()));var t},onRowUpdate:function(e){return r((t=e,function(){var e=Object(A.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.a.post("/category/".concat(t._id),t,{headers:{"Content-Type":"application/json"}}).then((function(e){return"error"==e.status?a({type:"DATA_ERR"}):a({type:"CATEGORY_SUCC_EDIT",editedCategory:e.data})})).catch((function(e){return a({type:"DATA_ERR"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var t},onRowDelete:function(e){return r(N(e))}}}))},Ee={Add:Object(r.forwardRef)((function(e,t){return n.a.createElement(L.a,Object.assign({},e,{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return n.a.createElement(Y.a,Object.assign({},e,{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return n.a.createElement(z.a,Object.assign({},e,{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return n.a.createElement(Q.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return n.a.createElement(J.a,Object.assign({},e,{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return n.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return n.a.createElement(le.a,Object.assign({},e,{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return n.a.createElement(te.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(re.a,Object.assign({},e,{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(ce.a,Object.assign({},e,{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(J.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(q.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return n.a.createElement(z.a,Object.assign({},e,{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return n.a.createElement(de.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return n.a.createElement(W.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return n.a.createElement(ie.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return n.a.createElement(ge.a,Object.assign({},e,{ref:t}))}))},je=function(){var e=Object(i.d)((function(e){return e.subcategoryReducer.subcategories})),t=Object(i.d)((function(e){return e.categoryReducer.categories})),a=Object(i.d)((function(e){return e.subcategoryReducer.status})),r=Object(i.d)((function(e){return e.subcategoryReducer.statusText})),c=Object(i.c)(),o=[],s=[],l={};if(t){for(var u=0;u<t.length;u++)s.push(t[u]._id),o.push(t[u].name);s.forEach((function(e,t){return l[e]=o[t]}))}var d={status:a,statusText:r};return n.a.createElement("div",{style:{width:"100%"}},n.a.createElement(Oe,{props:d}),n.a.createElement(be.a,{icons:Ee,columns:[{title:"Name",field:"name"},{title:"Position",field:"displayPosition"},{title:"idCategory",field:"idCategory",lookup:l},{title:"Display name",field:"displayName"},{title:"Short description",field:"shortDescription",cellStyle:{maxWidth:"100px",wordWrap:"break-word"}},{title:"Description",field:"description",cellStyle:{maxWidth:"200px",wordWrap:"break-word"}}],data:e,title:"Subcategories",editable:{onRowAdd:function(t){var a,r=t;return r.old=e,c((a=r,function(){var e=Object(A.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=a).name.length>=1&&r.name.length<=300&&r.displayPosition.length>=1&&r.displayPosition.length<=300&&r.displayName.length>=1&&r.displayPosition.length<=300&&r.idCategory.length>=1&&r.idCategory.length<=300&&r.shortDescription.length>=1&&r.displayPosition.length<=300&&r.description.length>=50&&r.displayPosition.length<=1e3){e.next=5;break}return e.abrupt("return",t({type:"SUBCATEGORY_ERROR_ADD"}));case 5:k.a.put("/subcategory/add",a).then((function(e){return console.log(e),"invalid data"==e?(console.log("eerore"),t({type:"SUBCATEGORY_ERROR_LOAD"})):t({type:"SUBCATEGORY_ADD_ELEM",newElemSubCategory:e.data})})).catch((function(e){return t({type:"SUBCATEGORY_ERROR_LOAD"})}));case 6:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()))},onRowUpdate:function(e){return c((t=e,function(){var e=Object(A.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.a.post("/subcategory/".concat(t._id),t,{headers:{"Content-Type":"application/json"}}).then((function(e){return"error"==e.status?a({type:"DATA_ERR"}):a({type:"SUBCATEGORY_SUCC_EDIT",editedSubcategory:e.data})})).catch((function(e){return a({type:"DATA_ERR"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var t},onRowDelete:function(e){return c((t=e,console.log(t),function(){var e=Object(A.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.a.delete("/subcategory/".concat(t._id)).then((function(e){return e.data==t._id?a({type:"SUCC_DELETE",ElemToDeleteSubCategory:t}):a({type:"SUBCATEGORY_ERROR_LOAD"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var t}}}))},we=a(27),Re=a(262),ve=a(361),Ce=a(263),Se=a(265),xe=a(213),De=a(345),Te=a(600),_e=a(362),Ae=a(102),Pe=a(387),ke=a.n(Pe),Ne=(a(587),a(101)),$e=function(e){var t=Object(E.a)((function(){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},cropArea:{marginTop:"20px",width:"700px",height:"700px",display:"flex",flexDirection:"column",alignItems:"center"},inputs:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:"800px",minWidth:"400px"},fullArea:{display:"flex",alignItems:"start",paddingTop:"20px",justifyContent:"space-around"},inputStyle:{marginBottom:"15px",width:"300px"},previewPanel:{display:"flex",maxWidth:"800px",flexWrap:"wrap",justifyContent:"center",alignItems:"center"},preview:{border:"1px solid #3f51b5",padding:"1px",width:"100px",height:"100px",margin:"10px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},img:{maxWidth:"100%",maxHeight:"100%"},previewCard:{display:"flex",flexDirection:"column",alignItems:"center"},Button:{margin:"10px"}}}))(),a=Object(i.c)(),c=Object(i.d)((function(e){return e.categoryReducer.categories})),o=Object(i.d)((function(e){return e.subcategoryReducer.subcategories})),s=Object(i.d)((function(e){return e.goodsReducer.uploadGoodStatus})),l=(Object(i.d)((function(e){return e.goodsReducer.statusText})),Object(r.useState)({name:"",displayName:"",shortDescription:"",idSubcategory:"",idCategory:"",description:"",mainPhoto1:null,photo1:null,price:"",displayPositionInCategory:"",displayPositionInSubcategory:""})),d=Object(y.a)(l,2),f=d[0],g=d[1],p=Object(r.useState)([]),b=Object(y.a)(p,2),m=b[0],O=b[1],h=Object(r.useState)(),j=Object(y.a)(h,2),w=j[0],R=j[1],v=Object(r.useState)(null),C=Object(y.a)(v,2),S=C[0],x=C[1],D=Object(r.useState)(),T=Object(y.a)(D,2),P=T[0],k=T[1],N=Object(r.useState)({unit:"%",width:10,height:10}),U=Object(y.a)(N,2),G=U[0],I=U[1],L=Object(r.useState)(),M=Object(y.a)(L,2),W=M[0],B=M[1],Y="Must be between 1 and 300 characters",F="Must be between 1 and 300 characters",q="Must be between 1 and 100 characters",H=" Must be between 50 and 1000 characters",J=" Must be between 1 and 100 characters",V=" Must be between 1 and 5 characters",z=" Must be between 1 and 5 characters",K=" Must be selected",Q=" Must be selected",X="Must be selected one photo",Z="Must be selected 1-10 photos",ee=Object(r.useState)(),te=Object(y.a)(ee,2),ae=te[0],re=te[1],ne=Object(r.useState)({}),ce=Object(y.a)(ne,2),oe=ce[0],ie=ce[1],se=function(e){if(re(!1),"mainPhoto1"===e.target.name){ie(Object(we.a)({},oe,Object(u.a)({},"mainPhoto1",!1)));var t=Object(we.a)({},f);t[e.target.name]=e.target.files[0],g(t)}else if("photo1"===e.target.name){ie(Object(we.a)({},oe,Object(u.a)({},"photo1",!1)));for(var a=Object(we.a)({},f),r=[],n=0;n<e.target.files.length;n++)r.push(e.target.files[n]);console.log("uploaded files:",e.target.files),O(r),a[e.target.name]=e.target.files,g(a)}else{var c=Object(we.a)({},f);switch(c[e.target.name]=e.target.value,g(c),e.target.name){case"name":e.target.value.length<1||e.target.value.length>300?ie(Object(we.a)({},oe,Object(u.a)({},"name",!0))):ie(Object(we.a)({},oe,Object(u.a)({},"name",!1)));break;case"displayName":e.target.value.length<1||e.target.value.length>300?ie(Object(we.a)({},oe,Object(u.a)({},"displayName",!0))):ie(Object(we.a)({},oe,Object(u.a)({},"displayName",!1)));break;case"idCategory":ie(Object(we.a)({},oe,Object(u.a)({},"idCategory",!1)));break;case"idSubcategory":ie(Object(we.a)({},oe,Object(u.a)({},"idSubcategory",!1)));break;case"shortDescription":e.target.value.length<1||e.target.value.length>100?ie(Object(we.a)({},oe,Object(u.a)({},"shortDescription",!0))):ie(Object(we.a)({},oe,Object(u.a)({},"shortDescription",!1)));break;case"description":e.target.value.length<50||e.target.value.length>1e3?ie(Object(we.a)({},oe,Object(u.a)({},"description",!0))):ie(Object(we.a)({},oe,Object(u.a)({},"description",!1)));break;case"price":e.target.value.length<1||e.target.value.length>100?ie(Object(we.a)({},oe,Object(u.a)({},"price",!0))):ie(Object(we.a)({},oe,Object(u.a)({},"price",!1)));break;case"displayPositionInCategory":e.target.value.length<1||e.target.value.length>5?ie(Object(we.a)({},oe,Object(u.a)({},"displayPositionInCategory",!0))):ie(Object(we.a)({},oe,Object(u.a)({},"displayPositionInCategory",!1)));break;case"displayPositionInSubcategory":e.target.value.length<1||e.target.value.length>5?ie(Object(we.a)({},oe,Object(u.a)({},"displayPositionInSubcategory",!0))):ie(Object(we.a)({},oe,Object(u.a)({},"displayPositionInSubcategory",!1)));break;case"idCategory":null==e.target.value?ie(Object(we.a)({},oe,Object(u.a)({},"idCategory",!0))):ie(Object(we.a)({},oe,Object(u.a)({},"idCategory",!1)));break;case"idSubcategory":null==e.target.value?ie(Object(we.a)({},oe,Object(u.a)({},"idSubcategory",!0))):ie(Object(we.a)({},oe,Object(u.a)({},"idSubcategory",!1)))}}},le=function(){var e=Object(A.a)(_.a.mark((function e(t){var r,n,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("errors",oe),r=!0,0===Object.keys(oe).length&&oe.constructor===Object&&(r=!1,re(!0)),n={},Object.keys(f).forEach((function(e){!1!==oe[e]?(r=!1,n[e]=!0,re(!0),console.log("loop check, key, value:",e,oe[e])):n[e]=!1})),ie(n),console.log(oe),r&&(console.log("request will be sent"),c=new FormData,Object.keys(f).forEach((function(e){if("photo1"===e)for(var t=0;t<m.length;t++)c.append(e,m[t]);else c.append(e,f[e])})),console.log(JSON.stringify(c)),a($(c)));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(e){var t=new FileReader;t.addEventListener("load",(function(){return R(t.result)})),t.readAsDataURL(e)},de=function(){var e=Object(A.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S&&t.width&&t.height&&fe(S,t,"newFile.jpeg");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(A.a)(_.a.mark((function e(t,a,r){var n,c,o,i,s,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=function(e,t){for(var a=e.split(","),r=a[0].match(/:(.*?);/)[1],n=atob(a[1]),c=n.length,o=new Uint8Array(c);c--;)o[c]=n.charCodeAt(c);return new File([o],t,{type:r})},n=document.createElement("canvas"),c=t.naturalWidth/t.width,o=t.naturalHeight/t.height,n.width=a.width,n.height=a.height,n.getContext("2d").drawImage(t,a.x*c,a.y*o,a.width*c,a.height*o,0,0,a.width,a.height),i=n.toDataURL("image/jpeg"),l=s(i,"keke.jpeg"),console.log(l),k(l);case 12:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),ge=Object(r.useCallback)((function(e){x(e)}),[]);return Object(r.useEffect)((function(){console.log("status",s)}),[s]),n.a.createElement("div",{className:t.fullArea},"success"==s?n.a.createElement(Ne.a,{to:"/goods"}):null,n.a.createElement(Re.a,{required:!0,component:"fieldset",error:ae,className:t.inputs},n.a.createElement(ve.a,{required:!0,error:oe.name,helperText:oe.name?Y:null,id:"name",label:"Name",name:"name",onChange:se,className:t.inputStyle}),n.a.createElement(ve.a,{id:"displayName",required:!0,error:oe.displayName,helperText:oe.displayName?F:null,label:"Display Name",name:"displayName",onChange:se,className:t.inputStyle}),n.a.createElement(Re.a,{error:oe.idCategory},n.a.createElement(Ce.a,{id:"idCategory"},"Category ID"),n.a.createElement(Se.a,{id:"idCategory",required:!0,name:"idCategory",onChange:se,style:{width:"300px"},value:f.idCategory||"",input:n.a.createElement(xe.a,{name:"idCategory",id:"idCategory",value:"idCategory"})},c.map((function(e){return n.a.createElement(De.a,{key:e._id,value:e._id},e.name)}))),n.a.createElement(Te.a,null,oe.idCategory?K:null)),n.a.createElement(Re.a,{error:oe.idSubcategory},n.a.createElement(Ce.a,{id:"idSubcategory"},"Subcategory ID"),n.a.createElement(Se.a,{id:"idSubcategory",required:!0,error:oe.idSubcategory,name:"idSubcategory",onChange:se,style:{width:"300px"},input:n.a.createElement(xe.a,{name:"idSubcategory",id:"idSubcategory",value:"idSubcategory"}),value:f.idSubcategory||""},o.map((function(e){return n.a.createElement(De.a,{key:e._id,value:e._id},e.name)}))),n.a.createElement(Te.a,null,oe.idSubcategory?Q:null)),n.a.createElement(ve.a,{id:"shortDescription",error:oe.shortDescription?oe.shortDescription:null,helperText:oe.shortDescription?q:null,name:"shortDescription",onChange:se,label:"Short Description",className:t.inputStyle}),n.a.createElement(ve.a,{id:"description",multiline:!0,error:oe.description,helperText:oe.description?H:null,name:"description",onChange:se,label:"Description",className:t.inputStyle}),n.a.createElement(ve.a,{id:"price",name:"price",required:!0,error:oe.price,helperText:oe.price?J:null,onChange:se,label:"Price",className:t.inputStyle}),n.a.createElement(ve.a,{id:"displayPositionInCategory",required:!0,error:oe.displayPositionInCategory,helperText:oe.displayPositionInCategory?V:null,name:"displayPositionInCategory",label:"Display Position In Category",onChange:se,className:t.inputStyle}),n.a.createElement(ve.a,{id:"displayPositionInSubcategory",required:!0,error:oe.displayPositionInSubcategory,helperText:oe.displayPositionInSubcategory?z:null,name:"displayPositionInSubcategory",label:"Display Position In Subcategory",onChange:se,className:t.inputStyle}),n.a.createElement(ve.a,{id:"mainPhoto1",type:"file",required:!0,error:oe.mainPhoto1,helperText:oe.mainPhoto1?X:null,name:"mainPhoto1",inputProps:{accept:"image/*"},onChange:se,style:{display:"none"}}),n.a.createElement("label",{htmlFor:"mainPhoto1"},n.a.createElement(_e.a,{variant:"contained",color:"primary",component:"span",className:t.Button},"Upload MAIN")),n.a.createElement(ve.a,{id:"photo1",type:"file",name:"photo1",required:!0,error:oe.photo1,helperText:oe.photo1?Z:null,inputProps:{multiple:!0,accept:"image/*"},onChange:se,style:{display:"none"}}),n.a.createElement("label",{htmlFor:"photo1"},n.a.createElement(_e.a,{variant:"contained",color:"primary",component:"span",className:t.Button},"Upload photos")),ae?n.a.createElement(Te.a,null,"Please enter correctly all fields"):null,n.a.createElement(_e.a,{type:"submit",onClick:le,color:"primary"},"ADD")),n.a.createElement("div",null,n.a.createElement("div",{className:t.previewPanel},f.mainPhoto1?n.a.createElement("div",{className:t.previewCard},n.a.createElement("div",{className:t.preview,onClick:function(){ue(f.mainPhoto1),B(-1)}},n.a.createElement("img",{key:f.mainPhoto1.lastModified,className:t.img,src:URL.createObjectURL(f.mainPhoto1)})),n.a.createElement(Ae.a,null,"Main photo")):null,m.map((function(e,a){return n.a.createElement("div",{className:t.previewCard,key:e.lastModified},n.a.createElement("div",{className:t.preview,onClick:function(){ue(e),B(a)}},n.a.createElement("img",{className:t.img,src:URL.createObjectURL(e)})),n.a.createElement(Ae.a,null,e.name.length>8?e.name.substring(0,8).concat("..."):e.name))}))),n.a.createElement("div",{className:t.cropArea},w?n.a.createElement(n.a.Fragment,null,n.a.createElement(_e.a,{onClick:function(){if(R(null),I({unit:"%",width:10,height:10}),-1===W)f.mainPhoto1=P;else{var e=m;e[W]=P,O(e)}},variant:"contained"},"Save changes"),n.a.createElement(ke.a,{src:w,crop:G,onImageLoaded:ge,onChange:function(e){return I(e)},onComplete:de})):null)))},Ue={Add:Object(r.forwardRef)((function(e,t){return n.a.createElement(L.a,Object.assign({},e,{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return n.a.createElement(Y.a,Object.assign({},e,{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return n.a.createElement(z.a,Object.assign({},e,{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return n.a.createElement(Q.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return n.a.createElement(J.a,Object.assign({},e,{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return n.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return n.a.createElement(le.a,Object.assign({},e,{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return n.a.createElement(te.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(re.a,Object.assign({},e,{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(ce.a,Object.assign({},e,{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(J.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return n.a.createElement(q.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return n.a.createElement(z.a,Object.assign({},e,{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return n.a.createElement(de.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return n.a.createElement(W.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return n.a.createElement(ie.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return n.a.createElement(ge.a,Object.assign({},e,{ref:t}))}))},Ge=function(){var e=Object(i.d)((function(e){return e.goodsReducer.goods})),t=(Object(i.d)((function(e){return e.categoryReducer.categories})),Object(i.d)((function(e){return e.subcategoryReducer.subcategories})),Object(i.d)((function(e){return e.goodsReducer.status}))),a=Object(i.d)((function(e){return e.goodsReducer.statusText})),r=Object(i.c)();console.log(e);var c={status:t,statusText:a};return n.a.createElement("div",{style:{width:"100%"}},n.a.createElement(Oe,{props:c}),n.a.createElement(be.a,{icons:Ue,columns:[{title:"Name",field:"name"},{title:"Main image",field:"mainPhoto",render:function(e){return n.a.createElement("img",{src:"/image/".concat(e.mainPhoto),style:{width:100,borderRadius:"3px"}})}},{title:"price",field:"price"},{title:"Pos in category",field:"displayPositionInCategory",cellStyle:{width:"100px"}},{title:"Pos in subcategory",field:"displayPositionInSubategory",cellStyle:{width:"100px"}},{title:"Display name",field:"displayName"},{title:"Short description",field:"shortDescription",cellStyle:{maxWidth:"100px",wordWrap:"break-word"}},{title:"Description",field:"description",cellStyle:{maxWidth:"200px",wordWrap:"break-word"}}],data:e,title:"Goods",editable:{onRowUpdate:function(e,t){return new Promise((function(e,t){}))},onRowDelete:function(e){return r(N(e))}},components:{Toolbar:function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(pe.MTableToolbar,e),n.a.createElement(D.b,{to:"/goods/add",style:{textDecoration:"none"}},n.a.createElement(_e.a,{variant:"contained"},"add good")))}}}))},Ie=a(53),Le=Object(Ie.a)();var Me=function(){var e=Object(E.a)((function(e){return{workArea:{width:"calc(100% - ".concat(130,"px)"),marginLeft:130}}}))();return n.a.createElement(i.a,{store:h},n.a.createElement(D.a,{history:Le},n.a.createElement(G,null),n.a.createElement("div",{className:e.workArea},n.a.createElement(Ne.b,{exact:!0,path:"/categories"},n.a.createElement(ye,null)),n.a.createElement(Ne.b,{exact:!0,path:"/subcategories"},n.a.createElement(je,null)),n.a.createElement(Ne.b,{exact:!0,path:"/goods"},n.a.createElement(Ge,null)),n.a.createElement(Ne.b,{exact:!0,path:"/goods/add"},n.a.createElement($e,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[396,1,2]]]);
//# sourceMappingURL=main.52df60e5.chunk.js.map